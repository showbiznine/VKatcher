<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:VKatcher.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:ViewModels="using:VKatcher.ViewModels"
      xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
      xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
      x:Name="pageRoot"
      x:Class="VKatcher.Views.MyMusicPage"
      mc:Ignorable="d"
      DataContext="{Binding MyMusic, Source={StaticResource Locator}}">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="168" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <TextBlock x:Name="lblTitle"
                   HorizontalAlignment="Left"
                   TextWrapping="Wrap"
                   Text="MY&#xA;MUSIC"
                   VerticalAlignment="Bottom"
                   Margin="12,0,0,12"
                   FontSize="44"
                   TextLineBounds="TrimToBaseline"
                   FontWeight="Black" />
        <Pivot Grid.Row="1"
               ItemContainerStyle="{StaticResource PivotNoSideBorderStyle}">
            <PivotItem x:Name="pviSaved"
                       Header="Saved"
                       Style="{StaticResource PivotNoSideBorderStyle}"
                       Margin="0">
                <Grid>
                    <ListView x:Name="lstSaved"
                              ItemTemplate="{StaticResource AudioListTemplate}"
                              ItemContainerStyle="{StaticResource ListViewTextHighlight}"
                              ItemsSource="{Binding _mySavedTracks}"
                              Padding="0,12,0,100"
                              SelectionMode="None"
                              IsItemClickEnabled="True">
                        <ListView.ItemContainerTransitions>
                            <TransitionCollection>
                                <EntranceThemeTransition IsStaggeringEnabled="True" />
                            </TransitionCollection>
                        </ListView.ItemContainerTransitions>
                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="ItemClick">
                                <Core:InvokeCommandAction Command="{Binding DataContext.PlaySongCommand, ElementName=pageRoot}"
                                                          CommandParameter="{Binding ClickedItem}" />
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                    </ListView>
                </Grid>
            </PivotItem>
            <PivotItem x:Name="pviDownloads"
                       Header="Downloads"
                       Margin="0">
                <Grid>
                    <ListView x:Name="lstDownloads"
                              ItemTemplate="{StaticResource AudioListTemplate}"
                              ItemContainerStyle="{StaticResource ListViewTextHighlight}"
                              ItemsSource="{Binding _myDownloads}"
                              Padding="0,12,0,100"
                              SelectionMode="None"
                              IsItemClickEnabled="True">
                        <ListView.ItemContainerTransitions>
                            <TransitionCollection>
                                <EntranceThemeTransition IsStaggeringEnabled="True" />
                            </TransitionCollection>
                        </ListView.ItemContainerTransitions>
                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="ItemClick">
                                <Core:InvokeCommandAction Command="{Binding DataContext.PlaySongCommand, ElementName=pageRoot}"
                                                          CommandParameter="{Binding ClickedItem}" />
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                    </ListView>
                </Grid>
            </PivotItem>
        </Pivot>
    </Grid>
</Page>
