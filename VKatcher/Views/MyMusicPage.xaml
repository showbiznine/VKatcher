<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:VKatcher.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:ViewModels="using:VKatcher.ViewModels"
      xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
      xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
      x:Name="pageRoot"
      x:Class="VKatcher.Views.MyMusicPage"
      mc:Ignorable="d"
      DataContext="{Binding MyMusic, Source={StaticResource Locator}}">

    <Grid Background="{StaticResource BG_Gray}">
        <Grid.RowDefinitions>
            <RowDefinition Height="64" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Pivot Grid.Row="1"
               ItemContainerStyle="{StaticResource PivotNoSideBorderStyle}">
            <PivotItem x:Name="pviSaved"
                       Header="Saved"
                       Style="{StaticResource PivotNoSideBorderStyle}"
                       Margin="0">
                <Grid>
                    <ListView x:Name="lstSaved"
                              ItemTemplate="{StaticResource AudioListTemplate}"
                              ItemContainerStyle="{StaticResource ListViewTextHighlight}"
                              ItemsSource="{Binding _mySavedTracks}"
                              Padding="0,12,0,100"
                              SelectionMode="None"
                              IsItemClickEnabled="True">
                        <ListView.ItemContainerTransitions>
                            <TransitionCollection>
                                <EntranceThemeTransition IsStaggeringEnabled="True" />
                            </TransitionCollection>
                        </ListView.ItemContainerTransitions>
                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="ItemClick">
                                <Core:InvokeCommandAction Command="{Binding DataContext.PlaySongCommand, ElementName=pageRoot}"
                                                          CommandParameter="{Binding ClickedItem}" />
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                    </ListView>
                </Grid>
            </PivotItem>
            <PivotItem x:Name="pviDownloads"
                       Header="Downloads"
                       Margin="0">
                <Grid>
                    <ListView x:Name="lstDownloads"
                              ItemTemplate="{StaticResource AudioListTemplate}"
                              ItemContainerStyle="{StaticResource ListViewTextHighlight}"
                              ItemsSource="{Binding _myDownloads}"
                              Padding="0,12,0,100"
                              SelectionMode="None"
                              IsItemClickEnabled="True">
                        <ListView.ItemContainerTransitions>
                            <TransitionCollection>
                                <EntranceThemeTransition IsStaggeringEnabled="True" />
                            </TransitionCollection>
                        </ListView.ItemContainerTransitions>
                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="ItemClick">
                                <Core:InvokeCommandAction Command="{Binding DataContext.PlaySongCommand, ElementName=pageRoot}"
                                                          CommandParameter="{Binding ClickedItem}" />
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                    </ListView>
                </Grid>
            </PivotItem>
        </Pivot>
        <Grid x:Name="grdTopBar"
              Background="#FF4E5867">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="64" />
                <ColumnDefinition />
                <ColumnDefinition Width="64" />
            </Grid.ColumnDefinitions>
            <Button x:Name="btnHamburger"
                    Content="&#xE700;"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    d:LayoutOverrides="Width"
                    Background="#00000000"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="28"
                    Foreground="White" />
            <TextBlock x:Name="textBlock"
                       Margin="8,0,0,0"
                       TextWrapping="Wrap"
                       Text="MY MUSIC"
                       VerticalAlignment="Center"
                       d:LayoutOverrides="Width"
                       HorizontalAlignment="Left"
                       Grid.Column="1"
                       FontSize="22"
                       FontWeight="Black"
                       TextLineBounds="Tight"
                       Foreground="White" />
            <Button x:Name="btnSearch"
                    Content="&#xE094;"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Background="#00000000"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="28"
                    Foreground="White"
                    d:LayoutOverrides="Width"
                    Grid.Column="2" />
        </Grid>
    </Grid>
</Page>
